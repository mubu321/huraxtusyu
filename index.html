<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”¥ EXTREME FLASH ANZAN ğŸ”¥</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #7f1d1d, #000000, #7f1d1d);
            color: white;
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .title {
            font-size: 2.5rem;
            font-weight: bold;
            color: #f87171;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            font-size: 1.25rem;
            color: #fca5a5;
        }

        .display-area {
            background: #000000;
            border: 4px solid #dc2626;
            border-radius: 0.5rem;
            padding: 2rem;
            margin-bottom: 2rem;
            min-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .number-display {
            text-align: center;
        }

        .counter {
            color: #f87171;
            font-size: 1.125rem;
            margin-bottom: 0.5rem;
        }

        .number {
            font-family: 'Courier New', monospace;
            font-size: 1.125rem;
            color: #4ade80;
            word-break: break-all;
            line-height: 1.2;
            max-height: 200px;
            overflow: hidden;
        }

        .status {
            text-align: center;
        }

        .status-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .status-text {
            font-size: 1.5rem;
        }

        .ready { color: #9ca3af; }
        .complete { color: #fbbf24; }

        .controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .btn {
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 0.5rem;
            font-size: 1.25rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .btn-start {
            background: #dc2626;
            color: white;
        }

        .btn-start:hover:not(:disabled) {
            background: #b91c1c;
        }

        .btn-stop {
            background: #ea580c;
            color: white;
        }

        .btn-stop:hover:not(:disabled) {
            background: #c2410c;
        }

        .btn-reset {
            background: #4b5563;
            color: white;
        }

        .btn-reset:hover {
            background: #374151;
        }

        .btn:disabled {
            background: #4b5563;
            cursor: not-allowed;
        }

        .answer-section {
            background: #111827;
            border: 2px solid #374151;
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 1rem;
        }

        .answer-input {
            width: 100%;
            height: 8rem;
            padding: 1rem;
            background: #000000;
            border: 1px solid #4b5563;
            border-radius: 0.25rem;
            color: white;
            font-family: 'Courier New', monospace;
            resize: none;
        }

        .answer-input::placeholder {
            color: #6b7280;
        }

        .btn-show {
            background: #2563eb;
            color: white;
            margin-top: 1rem;
        }

        .btn-show:hover {
            background: #1d4ed8;
        }

        .result-section {
            background: #111827;
            border: 2px solid #374151;
            border-radius: 0.5rem;
            padding: 1.5rem;
        }

        .result-item {
            margin-bottom: 1rem;
        }

        .result-label {
            font-size: 1.125rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .correct { color: #4ade80; }
        .user { color: #60a5fa; }

        .result-value {
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            background: #000000;
            padding: 0.75rem;
            border-radius: 0.25rem;
            border: 1px solid #374151;
            word-break: break-all;
        }

        .result-status {
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .success { color: #4ade80; }
        .fail { color: #f87171; }

        .info {
            margin-top: 2rem;
            text-align: center;
            font-size: 0.875rem;
            color: #9ca3af;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">ğŸ”¥ EXTREME FLASH ANZAN ğŸ”¥</h1>
            <p class="subtitle">900æ¡ Ã— 50å€‹ Ã— 50ms - ç©¶æ¥µã®é«˜é€Ÿæš—ç®—</p>
        </div>

        <div class="display-area" id="displayArea">
            <div class="status">
                <div class="status-icon">âš¡</div>
                <div class="status-text ready">æº–å‚™å®Œäº† - ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ãã ã•ã„</div>
            </div>
        </div>

        <div class="controls">
            <button class="btn btn-start" id="startBtn" onclick="startFlash()">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
            <button class="btn btn-stop" id="stopBtn" onclick="stopFlash()" disabled>ã‚¹ãƒˆãƒƒãƒ—</button>
            <button class="btn btn-reset" onclick="reset()">ãƒªã‚»ãƒƒãƒˆ</button>
        </div>

        <div class="answer-section hidden" id="answerSection">
            <h3 class="section-title">ã‚ãªãŸã®ç­”ãˆ</h3>
            <textarea id="userAnswer" class="answer-input" placeholder="åˆè¨ˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea>
            <div style="text-align: center;">
                <button class="btn btn-show" onclick="showAnswer()">æ­£è§£ã‚’è¡¨ç¤º</button>
            </div>
        </div>

        <div class="result-section hidden" id="resultSection">
            <h3 class="section-title">çµæœ</h3>
            
            <div class="result-item">
                <div class="result-label correct">æ­£è§£:</div>
                <div class="result-value" id="correctAnswer"></div>
            </div>
            
            <div class="result-item">
                <div class="result-label user">ã‚ãªãŸã®ç­”ãˆ:</div>
                <div class="result-value" id="userAnswerDisplay">(æœªå…¥åŠ›)</div>
            </div>
            
            <div class="result-status" id="resultStatus"></div>
        </div>

        <div class="info">
            <p>âš ï¸ æ¥µé™è¨­å®š: 900æ¡ã®æ•°å­—ã‚’50å€‹ã€å„50msï¼ˆ0.05ç§’ï¼‰ã§è¡¨ç¤º</p>
            <p>ç·è¡¨ç¤ºæ™‚é–“: ã‚ãšã‹2.5ç§’ï¼äººé–“ã®é™ç•Œã‚’å®Œå…¨ã«è¶…è¶Šï¼</p>
        </div>
    </div>

    <script>
        let numbers = [];
        let currentIndex = -1;
        let isRunning = false;
        let correctSum = '';
        let intervalId = null;

        // 900æ¡ã®ãƒ©ãƒ³ãƒ€ãƒ æ•°å­—ã‚’ç”Ÿæˆ
        function generateRandomNumber() {
            let num = '';
            // æœ€åˆã®æ¡ã¯1-9ï¼ˆå…ˆé ­0ã‚’é¿ã‘ã‚‹ï¼‰
            num += Math.floor(Math.random() * 9) + 1;
            // æ®‹ã‚Š899æ¡ã¯0-9
            for (let i = 1; i < 900; i++) {
                num += Math.floor(Math.random() * 10);
            }
            return num;
        }

        // å¤§ããªæ•°ã®åŠ ç®—é–¢æ•°
        function addBigNumbers(num1, num2) {
            const arr1 = num1.split('').reverse();
            const arr2 = num2.split('').reverse();
            const result = [];
            let carry = 0;
            const maxLength = Math.max(arr1.length, arr2.length);

            for (let i = 0; i < maxLength; i++) {
                const digit1 = parseInt(arr1[i] || '0');
                const digit2 = parseInt(arr2[i] || '0');
                const sum = digit1 + digit2 + carry;
                result.push(sum % 10);
                carry = Math.floor(sum / 10);
            }

            if (carry > 0) {
                result.push(carry);
            }

            return result.reverse().join('');
        }

        // 50å€‹ã®900æ¡æ•°å­—ã‚’ç”Ÿæˆã—ã€åˆè¨ˆã‚’è¨ˆç®—
        function generateNumbers() {
            const newNumbers = [];
            for (let i = 0; i < 50; i++) {
                newNumbers.push(generateRandomNumber());
            }
            
            // åˆè¨ˆã‚’è¨ˆç®—
            let sum = '0';
            for (const num of newNumbers) {
                sum = addBigNumbers(sum, num);
            }
            
            numbers = newNumbers;
            correctSum = sum;
            return newNumbers;
        }

        // ãƒ•ãƒ©ãƒƒã‚·ãƒ¥é–‹å§‹
        function startFlash() {
            generateNumbers();
            currentIndex = 0;
            isRunning = true;
            
            document.getElementById('startBtn').disabled = true;
            document.getElementById('stopBtn').disabled = false;
            document.getElementById('answerSection').classList.add('hidden');
            document.getElementById('resultSection').classList.add('hidden');
            document.getElementById('userAnswer').value = '';

            let index = 0;
            intervalId = setInterval(() => {
                if (index >= numbers.length) {
                    // å®Œäº†
                    currentIndex = -1;
                    isRunning = false;
                    clearInterval(intervalId);
                    
                    document.getElementById('startBtn').disabled = false;
                    document.getElementById('stopBtn').disabled = true;
                    document.getElementById('displayArea').innerHTML = `
                        <div class="status">
                            <div class="status-icon">ğŸ¯</div>
                            <div class="status-text complete">å®Œäº†ï¼</div>
                            <div style="font-size: 1.125rem; color: #9ca3af; margin-top: 0.5rem;">
                                ç­”ãˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                            </div>
                        </div>
                    `;
                    document.getElementById('answerSection').classList.remove('hidden');
                } else {
                    // æ•°å­—è¡¨ç¤º
                    currentIndex = index;
                    document.getElementById('displayArea').innerHTML = `
                        <div class="number-display">
                            <div class="counter">${index + 1} / 50</div>
                            <div class="number">${numbers[index]}</div>
                        </div>
                    `;
                    index++;
                }
            }, 50); // 50msé–“éš”
        }

        // åœæ­¢
        function stopFlash() {
            if (intervalId) {
                clearInterval(intervalId);
            }
            isRunning = false;
            currentIndex = -1;
            
            document.getElementById('startBtn').disabled = false;
            document.getElementById('stopBtn').disabled = true;
            document.getElementById('displayArea').innerHTML = `
                <div class="status">
                    <div class="status-icon">âš¡</div>
                    <div class="status-text ready">æº–å‚™å®Œäº† - ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ãã ã•ã„</div>
                </div>
            `;
        }

        // çµæœè¡¨ç¤º
        function showAnswer() {
            const userAnswer = document.getElementById('userAnswer').value;
            
            document.getElementById('correctAnswer').textContent = correctSum;
            document.getElementById('userAnswerDisplay').textContent = userAnswer || '(æœªå…¥åŠ›)';
            
            const resultStatus = document.getElementById('resultStatus');
            if (userAnswer === correctSum) {
                resultStatus.innerHTML = 'ğŸ‰ æ­£è§£ï¼ï¼ç´ æ™´ã‚‰ã—ã„ï¼ ğŸ‰';
                resultStatus.className = 'result-status success';
            } else {
                resultStatus.innerHTML = 'ğŸ’ª æƒœã—ã„ï¼å†æŒ‘æˆ¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼';
                resultStatus.className = 'result-status fail';
            }
            
            document.getElementById('resultSection').classList.remove('hidden');
        }

        // ãƒªã‚»ãƒƒãƒˆ
        function reset() {
            if (intervalId) {
                clearInterval(intervalId);
            }
            
            numbers = [];
            currentIndex = -1;
            isRunning = false;
            correctSum = '';
            
            document.getElementById('startBtn').disabled = false;
            document.getElementById('stopBtn').disabled = true;
            document.getElementById('userAnswer').value = '';
            document.getElementById('answerSection').classList.add('hidden');
            document.getElementById('resultSection').classList.add('hidden');
            
            document.getElementById('displayArea').innerHTML = `
                <div class="status">
                    <div class="status-icon">âš¡</div>
                    <div class="status-text ready">æº–å‚™å®Œäº† - ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ãã ã•ã„</div>
                </div>
            `;
        }
    </script>
</body>
</html>
